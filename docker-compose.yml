services:
  # Server container
  server:
    build:
      context: .
      dockerfile: ./docker/server/Dockerfile
    networks:
      - box_server
    environment:
      CRYPTO_CONFIG_AES_KEY: "123456789"

  # Proxy containers
  proxy:
    build:
      context: .
      dockerfile: ./docker/proxy/Dockerfile
    networks:
      - box_server
    ports:
      - "7700-7710:70" # port 70 within container mapped to port range 7700-7710 of the host machine

networks:
  box_server:
    driver: bridge